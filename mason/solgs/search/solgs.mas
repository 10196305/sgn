<%doc>

=head1 NAME 

/search/solgs.mas - a view for solgs search form - startpage for GEBV prediction model building

=AUTHOR

Isaak Y Tecle (iyt2@cornell.edu)

=cut

</%doc>

<%args>

$form
$message
$gs_traits_index

</%args>

<%perl>

</%perl>

<link rel="stylesheet" href="/static/css/solgs/solgs.css" type="text/css" />



<& /util/import_javascript.mas, classes => ["solGS.solGS", "solGS.searchTrials", "jquery.dataTables", "solGS.ajaxAutocomplete"] &>

<p>&nbsp</p>

<& /page/page_title.mas, title => "solGS: start building a GS model by searching for a trait or selecting a training population" &>

<&| /page/info_section.mas,
  collapsible => 1, 
  collapsed   => 0,
  title => "Search for a trait ",
&>

%if ($message)
%{
<p style="color:red">There is no phenotype data for <b>'<% $message %>'</b>.</p>
%}

<p style="text-align:center">Traits index: <b><% $gs_traits_index %> </b></p>
<p>&nbsp</p>
<p>&nbsp</p>


<% $form %>


<p>&nbsp</p>
<p>&nbsp</p>

</&>

<&| /page/info_section.mas, 
    collapsible => 1, 
    collapsed   => 1,
    title       => "Select a training population or create a new one using one or more trials",
  &>


  <div  class="form-inline">
    <input  type="text" class="form-control" placeholder="search for a trial or training population" size="50" id="population_search_entry"/>   
    <button type="submit" class="btn btn-primary" id="search_training_pop">
      <span class="glyphicon glyphicon-search"></span>
    </button>

    <button id="search_all_training_pops" style="position:absolute;right:100px;" class="btn btn-success" type="submit"> 
      <span value="Search for all training populations">Search for all training populations</span> 
    </button>
  </div>

  <div id="training_pops_message"  style="padding:20px 0px 10px 0px;font-weight:bold;text-align:center;color:#A7C942"></div>

  <div id="training_populations" style="display:none;">
    <table class="table" id="training_pops_list" style="text-align:left;"> 
      <thead>
	<tr>
	  <th>Trial/training population</th>
	  <th>Description</th>
	  <th>Year</th>
	  <th>Predict GEBVs</th>
	</tr>
      </thead>
  </table>
  </div>

  <br />



<& /solgs/population/project_details_form.mas &>

<div id="selected_trials" style="display:none;width:100%">

  <hr style="size:10px;color:"#5cb85c"/>

 <p style="text-align:center"> Trials to combine </p>

 <hr style="size:10px;color:"#5cb85c"/>

<table class="table" id="selected_trials_table" style="text-align:left;width:100%">
<tr>
  <th></th><th>Trial</th><th>Description</th><th>Location</th><th>Year</th><th>&nbsp</th>
</tr>
<tr> 
</tr>
</table>
</div>


<table id="selected_trials_header" style="text-align:left;width:100%">
<tr>
  <td>
    <div id="combine" style="display:none">
      <input  class="button" type="button" name="combine" value="Combine" onclick="downloadData();"/>
  </div>  
  </td>
  <td>
    <div id="search_again" style="display:none;text-align:right">
    <input style class="button" type="button" name="search_again" value="Search again" onclick="searchAgain();"/></td>
  </div>
</tr>
</table>


</&>


<&| /page/info_section.mas, 
    collapsible => 1, 
    collapsed   => 1,
    title       => "Select a list-based training population or create a new one",
  &>

  <& /solgs/population/user_reference_genotypes.mas &>
   
</&>


