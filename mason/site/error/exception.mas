<%args>
 $exception
</%args>

% $exception = [ $exception ] unless ref $exception eq 'ARRAY';
% for my $e (@$exception) {

<h1 style="text-align: center">
   <% $e->title || ( $e->is_error ? 'Server Error' : '' ) %>
</h1>

<div style="margin: auto; width: 90%">
    <p>
% if( $e->public_message ) {
    <% $e->public_message %>
% } else {
    Our apologies, there was an error processing your request.  
% }
    </p>

    <p>
% if( $e->notify ) {
    An error report has been sent to the <% $c->config->{name} || '' %> development team.
% }

% if( my $f = $c->config->{feedback_email} ) {

    Please also feel free to contact us at
    <a href="mailto:<% $f %>"><% $f %></a> and inform us of the
    problem, and
%   if( $e->is_error ) {
      we will keep you informed of our progress in resolving it.
%   } else {
      we will work with you to resolve it.
%   }
   </p>

% }

</div>

%   if( $e->can('developer_message') && defined $e->developer_message && !$c->get_conf('production_server') ) {
    <style>
       pre {
            white-space: pre-wrap;       /* css-3 */
            white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
            white-space: -pre-wrap;      /* Opera 4-6 */
            white-space: -o-pre-wrap;    /* Opera 7 */
            word-wrap: break-word;       /* Internet Explorer 5.5+ */
        }
     </style>

    <div style="margin: 1em 0; border: 2px solid orange; padding: 0 1em 1em 1em">
      <h3>Developer message:</h3>
        <pre><% defined $e->developer_message ? $e->developer_message : 'none provided' %></pre>
    </div>
%   }
% }
