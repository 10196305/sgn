
<%args>
   $goto_url
</%args>

<style>
.textlabel {
  width: 200px;
  white-space: nowrap;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  float:left;     
}

.input { 
  width: 200px;
  white-space:nowrap;
}

.form-control { 
  width: 300px;
}

</style>

<& /page/page_title.mas, title=>"Login" &>

<script>

  jQuery(document).ready( function() { 
  
    jQuery('#site_login_dialog').modal('show');

    jQuery('#login_form').submit( function(event) { 
       var form_data = jQuery('#login_form').serialize();
       if (!jQuery('#username').val() || !jQuery('#password').val()) { 
         alert('Please enter a username and password');
         return;
       }
       jQuery.ajax( { 
         url: '/ajax/user/login',
         data: form_data,
         error: function(r) { alert('An error occurred! Sorry!');  },
         success: function(r) {
           if (r.error) { alert(r.error); }
           else { 
               window.location.replace('<% $goto_url %> ');

           }
         }
       });
       event.preventDefault();
    });
  });
</script>
