
<& '/page/page_title.mas', title => "Interactive Label Maker" &>

<& '/util/import_javascript.mas', classes => [ 'jquery', 'jqueryui', 'popup', 'd3.d3Min.js', 'tools.InteractiveBarcoder', 'spin_min', 'ladda_min', 'CXGN.BreederSearch', 'textTemplater', ] &>

<div class="row">
    
    <div class="well col-md-12">
            <div class="col-md-12 form-inline">
                <label class="col-md-2 col-form-label">Data Source:</label>
                <div class="col-md-8">
                    <select class="form-control" id="trial_select"></select>
                </div>
                <div class="col-md-2">
                </div>
                <!-- <div class="col-md-1">
                    <center><i>or</i></center>&nbsp
                </div>
                <div class="col-md-4">
                    <input type="file" class="form-control-file" id="label_input_file" aria-describedby="fileHelp">
                    <small id="fileHelp" class="form-text text-muted">.xls format only, columns must have unique names</small>
                </div> -->
            </div>
        </br>
            <div class="col-md-12 form-inline" id="d3-page-format" style="display:none">
                <div class="col-md-2">
                    </br>
                    <label>Page Format:</label>
                </div>
                <div class="col-md-3">
                    </br>
                    <select class="form-control" id="d3-page-type-select" ></select>
                </div>
                <div id="d3-page-custom-dimensions-div" style="display:none">
                    <div class="col-md-3">
                        <center>
                            <label>Page Width:</label></br>
                            <input class="form-control" placeholder="Page Width in mm" type="number" id="d3-page-custom-width" style="max-width: 100%;">
                        </center>
                    </div>
                    <div class="col-md-3">
                        <center>
                            <label>Page Height:</label></br>
                            <input class="form-control" placeholder="Page Height in mm" type="number" id="d3-page-custom-height" style="max-width: 100%;">
                        </center>
                    </div>
                </div>
            </div>
            <div class="col-md-12 form-inline" id="d3-label-format" style="display:none">
                <div class="col-md-2">
                    </br>
                    <label>Label Format:</label>
                </div>
                <div class="col-md-3">
                    </br>
                    <select class="form-control" id="d3-label-size-select"></select>
                </div>
                <div id="d3-label-custom-dimensions-div" style="display:none">
                    <div class="col-md-3">
                        <center>
                            <label>Label Width:</label></br>
                            <input class="form-control" placeholder="Label Width in mm" type="number" id="d3-label-custom-width" style="max-width: 100%;">
                        </center>
                    </div>
                    <div class="col-md-3">
                        <center>
                            <label>Label Height:</label></br>
                            <input class="form-control" placeholder="Label Height in mm" type="number" id="d3-label-custom-height" style="max-width: 100%;">
                        </center>
                    </div>
                    <div class="col-md-1">
                    </br>
                        <button id="d3-apply-custom-label-size" type="button" class="btn btn-primary">Apply</button>
                    </div>
                </div>
            </div>
    </div>

    <div class="col-md-12" id="d3-draw-div" style="display:none;margin-bottom:20px;">
        <div class="col-md-2"></div>
        <div class="col-md-8" id="d3-draw-area"></div>
        <div class="col-md-2"></div>    
    </div>

    <div id="d3-adders" class="well col-md-12" style="display:none">
        <div class="col-md-12 form-inline">
            <center>
                <label>Add to Label</label>
            </center>
        </div>
        <div class="col-md-12 form-inline">
            <div class="col-md-3" id="d3-add-field-div">
                <center>
                    <label>Field:</label></br>
                    <select id="d3-add-field-input" class="form-control"></select>&nbsp&nbsp
                </center>
            </div>
            <div class="col-md-3" id="d3-add-type-div">
                <center>
                    <label>Type:</label></br>
                    <select id="d3-add-type-input" class="form-control"></select>&nbsp&nbsp
                </center>
            </div>
            <div class="col-md-3" id="d3-add-font-div">
                <center>
                    <label>Font:</label></br>
                    <select id="d3-add-font-input" class="form-control"></select>&nbsp&nbsp
                </center>
            </div>
            <div class="col-md-3" id="d3-add-size-div">
                <center>
                    <label>Size:</label></br>
                    <input class="form-control" id="d3-add-size-slider" type="range"></input>
                    <input class="form-control" id="d3-add-size-input" type="number"></input>
                </center>
            </div>
        </div>
    </br>
        <div class="col-md-12 form-inline">
            <center>
                <button class="btn btn-primary d3-add" id="d3-add">Add</button>
            </center>
        </div>
    </div>
    
    <div id="d3-download" class="well col-md-12" style="display:none">
        <div class="col-md-2">
            <center>
                <label>Sort by:</label>
                <select class="form-control" id="sort_by" name="sort_by"></select>
            </center>
        </div>
        <div class="col-md-2">
            <center>
                <label>Copies of each label:</label>
                <select class="form-control" id="num_labels" name="num_labels">
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </center>
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary" id="edit_print_settings">Edit Print Settings</button>
        </div>
        <div class="col-md-6">
            <center>
                <br><button id="d3-save-button" title="Saving designs is not implemented yet" class="btn btn-primary" disabled>Save design</button>&nbsp&nbsp&nbsp&nbsp
                <button id="d3-pdf-button" value="pdf" class="btn btn-primary" style="display:none">Download pdf</button>&nbsp&nbsp
                <button id="d3-zpl-button" value="zpl" class="btn btn-primary" style="display:none">Download zpl file</button>
            </center>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="customFieldModal" tabindex="-1" role="dialog" aria-labelledby="customFieldModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                    <div class="row">
               <div class="col-md-12">
                   <span id="d3-custom-templater"</span>
               </div>
           </div>
                    <div class="row">
               <div class="col-md-12">
                   <input type="text" class="form-control" name="" id="d3-custom-content" value="" size="30">
               </div>
           </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button id="d3-custom-field" type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editPrintSettingsModal" tabindex="-1" role="dialog" aria-labelledby="editPrintSettingsModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="col-md-10 form-inline" id="">
                    <div class="col-md-5">
                        <center>
                            <label>Top Margin:</label></br>
                            <input class="form-control" placeholder="Top Margin in mm" type="number" id="d3-top-margin" style="max-width: 100%;">
                        </center>
                    </div>
                    <div class="col-md-5">
                        <center>
                            <label>Left Margin:</label></br>
                            <input class="form-control" placeholder="Left Margin in mm" type="number" id="d3-left-margin" style="max-width: 100%;">
                        </center>
                    </div>
                </div>
                <div class="col-md-10 form-inline" id="">
                    <div class="col-md-5">
                        <center>
                            <label>Column Offset:</label></br>
                            <input class="form-control" placeholder="Column Offset in mm" type="number" id="d3-column-offset" style="max-width: 100%;">
                        </center>
                    </div>
                    <div class="col-md-5">
                        <center>
                            <label>Row Offset:</label></br>
                            <input class="form-control" placeholder="Row Offset in mm" type="number" id="d3-row-offset" style="max-width: 100%;">
                        </center>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button id="d3-edit-print-settings" type="button" class="btn btn-primary" data-dismiss="modal">Save</button>
            </div>
        </div>
    </div>
</div>

<div id="savingplace"></div>
