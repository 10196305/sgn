
<%args>
$dataset_id => undef
</%args>

<& /util/import_javascript.mas, entries => ["wizard"] &>
<& /util/import_css.mas, paths => ['wizard.css'] &>

<& /page/page_title.mas, title=>"Search Wizard" &>

<div id="wizard" class="row">
  
  <span class="wizard-main">
    <span class="wizard-columns"></span>
    <div class="templates" style="display: none !important;">
      
      <div class="wizard-unselected">
        <div class="btn-group wizard-list-item">
          <button type="button" class="btn btn-xs btn-success wizard-list-add">&#x2b;</button>
          <a target="_blank" class="btn btn-xs btn-default wizard-list-name"></a>
        </div>
      </div>
      
      <div class="wizard-selected">
        <div class="btn-group wizard-list-item">
          <button type="button" class="btn btn-xs btn-danger wizard-list-rem">&#10005;</button>
          <a target="_blank" class="btn btn-xs btn-default wizard-list-name"></a>
        </div>
      </div>
      
      <div class="wizard-column">
        <div class="wizard-panel panel panel-default">
          
          <span class="wizard-loader glyphicon glyphicon-refresh" aria-hidden="true"></span>
          
          <div class="panel-heading">
            <select class="wizard-type-select form-control input-sm form-inline">
              <option value="" disabled selected>Select Column Type</option>
              <optgroup class="wizard-types-group" label="--------------------"></optgroup>
              <optgroup class="wizard-lists-group" label="Load Selection from List:"></optgroup>
            </select>
          </div>
          
          <div class="panel-heading">
            <input type="text" class="wizard-search form-control input-sm" placeholder="Search">
          </div>
          
          <div class="panel-body">
            
            <div class="wizard-btn-center">
              <div class="btn-group"> 
                <button class="wizard-select-all btn btn-default btn-xs">Select All</button
                ><button class="wizard-btn-tag btn btn-primary btn-xs">
                  <span class="wizard-count-selected">0</span>/<span class="wizard-count-all">0</span>
                </button
                ><button class="wizard-select-clear btn btn-default btn-xs">Clear</button>
              </div>
            </div>
            
            <ul class="wizard-list-unselected wizard-list well"></ul>
            <ul class="wizard-list-selected wizard-list well"></ul>
            
            <div class="wizard-btn-center wizard-union-toggle">
              <div class="btn-group"> 
                <button class="wizard-btn-tag btn btn-xs btn-default disabled">Match</button
                ><button class="btn btn-xs btn-primary active">ANY</button
                ><button class="btn btn-default btn-xs">ALL</button>
              </div>
            </div>
            
          </div>
          
          <table class="wizard-save-to-list table panel-footer">
            <tr>
              <td>
                <select class="wizard-add-to-list-id form-control input-sm">
                  <option selected value="" disabled>Add to List...</option>
                  <optgroup class="wizard-lists-group" label="--------------------"></optgroup>
                </select>
              </td>
              <td>
                <button class="wizard-add-to-list btn btn-sm btn-primary btn-block">Add</button>
              </td>
            </tr>
            <tr>
              <td>
                <input class="wizard-create-list-name form-control input-sm" type="text" placeholder="Create New List..."></input>
              </td>
              <td>
                <button class="wizard-create-list btn btn-primary btn-sm btn-block">Create</button>
              </td>
            </tr>
          </table>  
          
        </div>
      </div>
      
    </div>
  </span>
  
  <div class="clearfix col-xs-12"></div>
  
  <div class="wizard-datasets col-sm-12 col-md-6">
    <div class="panel panel-default wizard-panel">
      <div class="panel-heading">
        Load/Create Dataset using <button class="btn btn-xs btn-default disabled wizard-btn-tag">Match</button> Columns
      </div>
      <div class="panel-body">
        <div class="input-group">
          <select class="form-control input-sm wizard-dataset-select">
            <option selected value="" disabled>Load Dataset</option>
            <optgroup class="wizard-dataset-group" label="--------------------"></optgroup>
          </select>
          <span class="input-group-btn">
            <span><button style="width:5em;margin-left:4px;" class="btn btn-sm btn-primary wizard-dataset-load">Load</button></span>
          </span>
        </div>
      </div>
      <div class="panel-body" style="margin-top:-1px;">
        <div class="input-group">
          <input type="text" placeholder="Create New Dataset" class="form-control input-sm wizard-dataset-name" />
          <span class="input-group-btn">
            <span><button style="width:5em;margin-left:4px;" class="btn btn-sm btn-primary wizard-dataset-create">Create</button></span>
          </span>
        </div>
      </div>
    </div>
  </div>
  
  <div class="wizard-downloads col-sm-12 col-md-6">  
    
      <div class="panel panel-info">
        <div class="panel-heading">
          Related Genotype Data
        </div>
        <table class="wizard-download-genotypes table ">
          <tr>
            <td colspan="2">
              <input class="form-control input-sm" type="text" disabled></input>
            </td>
            <td>
              <button class="btn btn-sm btn-primary btn-block">
                  <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                  Genotypes
              </button>
            </td>
          </tr>
        </table>
      </div>  
      
      <div class="panel panel-info">
        <div class="panel-heading">
          Related Trial Metadata
        </div>
        <table class="wizard-download-trial_data table">
          <tr>
            <td colspan="2">
              <input class="form-control input-sm" type="text" disabled value="No Trials Selected"></input>
            </td>
          </tr>
          <tr>
            <td>
              <select class="form-control input-sm">
                <option selected value="" disabled>Format</option>
                <option value="csv">CSV</option>
                <option value="xls">XLS</option>
              </select>
            </td>
            <td>
              <button class="wizard-download-trial_data-metadata btn btn-sm btn-primary btn-block">
                  <span class="glyphicon glyphicon-download" aria-hidden="true"></span> 
                  Metadata
              </button>
            </td>
          </tr>
        </table>
      </div>  
      
      <div class="panel panel-info">
        <div class="panel-heading">
          Related Trial Phenotypes
        </div>
        <table class="wizard-download-trial_data table">
          <tr>
            <td colspan="3">
              <input class="form-control input-sm" type="text" disabled value="No Trials Selected"></input>
            </td>
          </tr>
          <tr>
            <td>
              <div class="checkbox">
                <label>
                  <input type="checkbox">
                  Include timestamps
                </label>
              </div>
            </td>
            <td colspan="2">
              <div class="checkbox">
                <label>
                  <input type="checkbox">
                  Supress user defined phenotype outliers
                </label>
              </div>
            </td>
          </tr>
          <tr>
            <td>
              <span>Trait Name Contains</span>
              <input type="text" class="form-control">
            </td>
            <td>
              <span>Min Value</span>
              <input type="text" class="form-control">
            </td>
            <td>
              <span>Max Value</span>
              <input type="text" class="form-control">
            </td>
          </tr>
          <tr>
            <td>
              <select class="form-control input-sm">
                <option selected value="" disabled>Format</option>
                <option value="csv">CSV</option>
                <option value="xls">XLS</option>
              </select>
            </td>
            <td>
              <select class="form-control input-sm">
                <option selected value="" disabled>Data Level</option>
                <option value="plot">Plots</option>
                <option value="plant">Plants</option>
              </select>
            </td>
            <td>
              <button class="wizard-download-trial_data-phenotypes btn btn-sm btn-primary btn-block">
                  <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                  Phenotypes
              </button>
            </td>
          </tr>
        </table>
      </div> 
      
  </div>
  
</div>

<script type="text/javascript">
  jsMod['wizard'].WizardSetup("#wizard")
</script>
