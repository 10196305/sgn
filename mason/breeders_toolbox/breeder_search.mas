
<%args>

</%args>

<& /util/import_javascript.mas, classes => [ 'jqueryui', 'jquery.cookie', 'CXGN.BreederSearch', 'CXGN.List', 'CXGN.BreedersToolbox.HTMLSelect' ] &>

<table><tr><td>
Search using accession, plot, location, year, trial, and trait data.
</td></tr></table>
  
<table class="table borderless" alt="breeder search" border="0" >
<tr>
<td width="200">
  <div class="form-group form-group-sm">
    <label class="col-sm-4 control-label">Start from a List: </label>
    <div class="col-sm-8">
      <div id="paste_list"></div>
<script defer="defer">
  jQuery(document).ready(function() {
      pasteListMenu('c1_data', 'paste_list');
  });
</script>
    </div>
  </div>
</td>
<td>
<div class="checkbox">
  <div align="center">Retrieve</div>
  <label><input type="checkbox" id="c2_querytype" name="2" value="union" checked>Union (&cup;)</label>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <label><input type="checkbox" id="c2_querytype" name="2" value="intersect">Intersection (&cap;)</label>
  <div align="center">of selected data with:</div>
</div>
</td>
<td>
<div class="checkbox">
  <div align="center">Retrieve</div>
  <label><input type="checkbox" id="c3_querytype" name="3" value="union" checked>Union (&cup;)</label>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <label><input type="checkbox" id="c3_querytype" name="3" value="intersect">Intersection (&cap;)</label>
  <div align="center">of selected data with:</div>
</div>
</td>
<td>
<div class="checkbox">
  <div align="center">Retrieve</div>
  <label><input type="checkbox" id="c4_querytype" name="4" value="union" checked>Union (&cup;)</label>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <label><input type="checkbox" id="c4_querytype" name="4" value="intersect">Intersection (&cap;)</label>
  <div align="center">of selected data with:</div>
</div>
</td>
</tr>
<tr>
<td width="200">
  <select class="form-control input-sm" id="select1" name="1"></select>
</td>
<td>
  <select class="form-control input-sm" id="select2" name="2"></select>
</td>
<td>
  <select class="form-control input-sm" id="select3" name="3"></select>
</td>
<td>
  <select class="form-control input-sm" id="select4" name="4"></select>
</td>
</tr>
<tr>
<td >
  <select multiple class="form-control" id="c1_data" name="1" size="10" style="width:200px; overflow:auto;"></select>
</td>
<td width="200">
  <select multiple class="form-control" id="c2_data" name="2" size="10"  style="width:200px; overflow:auto;"></select>
</td>

<td width="200">
  <select multiple class="form-control" id="c3_data" name="3" size="10" style="width:200px; overflow:auto;"></select>
</td>

<td width="200">
  <select multiple class="form-control" id="c4_data" name="4" size="10" style="width:200px; overflow:auto;"></select>	  
</td>
    <td>
      <input class="btn btn-primary" type="button" id="phenotype" value="Download Phenotypes"/>
      <input type="hidden" id="download_token_value" name="download_token_value"/>
      <br>
      <input class="btn btn-primary" type="button" id="genotype" value="Download Genotypes" />
    </td>
</tr>
<tr>
<td>
<button class="btn btn-default btn-sm" id="c1_select_all" name="1"/>Select All</button>
<hr style="margin-top:4px;margin-bottom:4px" />
<div class="well well-sm"><div id="c1_data_count" name="1">No Selection</div></div>
<div id="c1_to_list_menu"></div>
</td>
<td>
<button class="btn btn-default btn-sm" id="c2_select_all" name="2"/>Select All</button>
<hr style="margin-top:4px;margin-bottom:4px" />
<div class="well well-sm"><div id="c2_data_count" name="2">No Selection</div></div>
<div id="c2_to_list_menu"></div>
</td>
<td>
<button class="btn btn-default btn-sm" id="c3_select_all" name="3"/>Select All</button>
<hr style="margin-top:4px;margin-bottom:4px" />
<div class="well well-sm"><div id="c3_data_count" name="3">No Selection</div></div>
<div id="c3_to_list_menu"></div>
</td>
<td>
<button class="btn btn-default btn-sm" id="c4_select_all" name="4"/>Select All</button>
<hr style="margin-top:4px;margin-bottom:4px" />
<div class="well well-sm"><div id="c4_data_count" name="4">No Selection</div></div>
<div id="c4_to_list_menu"></div>
</td></tr>
</table>

<input type="checkbox" id="restrict_genotypes" name="restrict_genotypes" />&nbsp;Only show accessions that have been genotyped with protocol:
<div id="select_gt_protocol_div"></div>


<style>
.borderless tbody tr td, .borderless tbody tr th, .borderless thead tr th {
    border: none;
}
</style>


<script defer="defer">
jQuery(document).ready(function() {

//pasteListMenu('c1_data', 'populate_from_list');

  get_select_box('genotyping_protocols', 'select_gt_protocol_div', 'gt_protocol_select');

  var starting_categories = { '': 'please select', breeding_programs: 'breeding_programs', locations : 'locations', traits : 'traits', trials :'trials', years : 'years'};
  var html = format_options(starting_categories);

  jQuery('#select1').html(html);  
  
  jQuery('select').mouseenter(function() {this.tooltip});

    if (!isLoggedIn()) {
      jQuery('#c1_to_list_menu').html('<div class="well well-sm">Login to use lists</div>');
      jQuery('#c2_to_list_menu').html('<div class="well well-sm">Login to use lists</div>');
      jQuery('#c3_to_list_menu').html('<div class="well well-sm">Login to use lists</div>');
      jQuery('#c4_to_list_menu').html('<div class="well well-sm">Login to use lists</div>');

    }
    else { 
      addToListMenu('c1_to_list_menu', 'c1_data', { 
        selectText: true,
        typeSourceDiv: 'select1',
      });
      addToListMenu('c2_to_list_menu', 'c2_data', { 
        selectText: true,
        typeSourceDiv: 'select2',
      });
      addToListMenu('c3_to_list_menu', 'c3_data', { 
        selectText: true,
        typeSourceDiv: 'select3',
       });      
      addToListMenu('c4_to_list_menu', 'c4_data', { 
        selectText: true,
        typeSourceDiv: 'select4',
       });
    }
 });

</script>





