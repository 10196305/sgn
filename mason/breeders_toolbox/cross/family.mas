
<%args>
$family_id
$family_name => ''
$breeding_program => undef
$user_id => undef
$identifier_prefix => ''
</%args>

<& /util/import_javascript.mas, classes => ["jquery", "jqueryui", "thickbox", "CXGN.Phenome.Tools", "CXGN.Page.FormattingHelpers", "jquery.cookie", "CXGN.List"] &>

<& /page/page_title.mas, title => "Details for family '$family_name'" &>

<&| /page/info_section.mas, title => "Family information" &>

<div class="panel panel-default">
    <div class="panel-body">
        <div class="row">
            <div class="col-sm-6">
                <& /page/form.mas,
                    object_type=>'family_name',
                    object_id=> $family_id,
                    form_name=> 'stock_form',
                    server_side_script => '/phenome/stock/stock_ajax_form.pl',
                    form_div_name=>'stock_details',
                    js_object_name=> 'stockForm',
                    page_url => "/family/$family_id" ,
                    alternate_new_button => '',
                    alternate_ghosted_new_button => '',
                    alternate_delete_button => '',
                    alternate_ghosted_delete_button => ''
                &>
            </div>
            <div class="col-sm-6">
                <br /><br />
                <& /util/barcode.mas, identifier => "$identifier_prefix"."$family_id", text=> "$identifier_prefix stock $family_id ($family_name)", format=>"stock_qrcode"  &>
                <br /><br />
            </div>
        </div>
    </div>
</div>

</&>

<& /util/import_javascript.mas, classes => ['jquery','jquery.dataTables'] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>

<&| /page/info_section.mas, title => 'Parents', collapsible=>1, collapsed=>0 &>
    <div class = "well well-sm">
        <div class = "panel panel-default">
            <div class = "panel-body">
                <table id = "family_parent_information" class="table table-hover table-striped">
                    <thead>
                        <tr>
                            <th>Female Parent</th>
                            <th>Female Stock Type</th>
                            <th>Male Parent</th>
                            <th>Male Stock Type</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
</&>


<script>

jQuery(document).ready(function(){

    var family_id = "<% $family_id %>";

    var family_parent_table = jQuery('#family_parent_information').DataTable({
            'ajax': '/ajax/family/parents/'+family_id,
            'paging' : false,
            'searching' : false,
            'destroy' : true,
        });

});


</script>
