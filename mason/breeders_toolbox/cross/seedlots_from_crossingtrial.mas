<%args>
$trial_id
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery', 'jquery.dataTables' ] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>

<table class="table table-hover table-bordered" id="seedlots_from_crossingtrial_table">
</table>

<div class="modal fade" id="add_cross_seedlot_dialog" name="add_cross_seedlot_dialog" tabindex="-1" role="dialog" aria-labelledby="add_seedlot_dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="add_seedlot_dialog">Add New Seedlot</h4>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
            <div id="add_cross_seedlot_div">
            </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="add_cross_seedlot_button" type="button" class="btn btn-primary" >Add</button>
      </div>
    </div>
  </div>
</div>



<script>

jQuery(document).ready(function(){

    jQuery('#seedlots_from_crossingtrial_section_onswitch').click(function(){

        var seedlots_crossingtrial_table = jQuery('#seedlots_from_crossingtrial_table').DataTable({

            'ajax':'/ajax/breeders/trial/'+ <% $trial_id %> + '/seedlots_from_crossingtrial',

            columns: [
                { title: "Cross Unique ID", "data": null, "render": function ( data, type, row ) { return "<a href='/cross/"+row.cross_id+"'>"+row.cross_name+"</a>"; } },
                { title: "Seedlot Name", "data": null, "render": function ( data, type, row ) {
                    if (row.seedlot_id === null){
                        return 'No Seedlot'
                    } else {
                        return "<a href='/breeders/seedlot/"+row.seedlot_id+"'>"+row.seedlot_name+"</a>"
                    }
                }},
                { title: "Add New Seedlot", "data": "null", "render": function ( data, type, row ) { return "<a onclick='addSeedlot()' >Add</a>"; } },
            ]
        });
    });

    });



function addSeedlot(){

            var html = '';

                html = html + '<form class="form-horizontal"><div class="form-group"><label class="col-sm-3 control-label">Seedlot Name: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_name" placeholder="Required"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Breeding Program: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_program" placeholder="Required"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Location: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_location" placeholder="Required"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Content: </label><div class="col-sm-9" ><input class="form-control" id="new_cross_seedlot" placeholder="Required"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Amount: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_amount" placeholder="Number of seeds, required"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Organization: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_organization" placeholder="Optional"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Timestamp: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_timestamp" placeholder="Required"></div><br><br>';
                html = html + '<label class="col-sm-3 control-label">Description: </label><div class="col-sm-9" ><input class="form-control" id="new_seedlot_description" placeholder="Optional"></div></div></div></form>';


                jQuery('#add_cross_seedlot_div').html(html);
                jQuery('#add_cross_seedlot_dialog').modal('show');
}


</script>
