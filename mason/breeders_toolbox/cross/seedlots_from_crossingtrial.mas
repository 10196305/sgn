<%args>
$trial_id
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery', 'jquery.dataTables' ] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>

<table class="table table-hover table-bordered" id="seedlots_from_crossingtrial_table">
</table>


<script>

jQuery(document).ready(function(){

    jQuery('#seedlots_from_crossingtrial_section_onswitch').click(function(){

        var seedlots_crossingtrial_table = jQuery('#seedlots_from_crossingtrial_table').DataTable({

            'ajax':'/ajax/breeders/trial/'+ <% $trial_id %> + '/seedlots_from_crossingtrial',

            columns: [
                { title: "Cross Name", "data": null, "render": function ( data, type, row ) { return "<a href='/cross/"+row.cross_id+"'>"+row.cross_name+"</a>"; } },
                { title: "Seedlot Name", "data": null, "render": function ( data, type, row ) {
                    if (row.seedlot_id === null){
                        return 'No Seedlot'
                    } else {
                        return "<a href='/breeders/seedlot/"+row.seedlot_id+"'>"+row.seedlot_name+"</a>"
                    }
                }},
                { title: "Add New Seedlot", "data": "null", "render": function ( data, type, row ) { return "<a onclick='addSeedlot("+row.cross_name+")' >Add</a>"; } },
            ]
        });
    });

});

</script>
