<%args>
$trial_id
</%args>

<& /util/import_javascript.mas, classes => [ 'jquery', 'jquery.dataTables' ] &>
<& /util/import_css.mas, paths => ['/documents/inc/datatables/jquery.dataTables.css'] &>

<&| /page/info_section.mas, id=>'delete_genotyping_plate_section', title => 'Delete Genotyping Plate(s)', subtitle => '<font color="red">Deletion cannot be undone</font>', collapsible=>1, collapsed=>1 &>
    <div class="well well-sm">
        <div class="panel panel-default">
            <div class="panel-body">
                <table class="table table-hover table-bordered" id="genotyping_plate_deletion_table">
                </table>
            </div>
        </div>
        <button class="btn btn-default" id="delete_all_genotyping_plates" role="button">Delete all genotyping plates in this project</button><br/><br/>
    </div>
</&>

<&| /page/info_section.mas, id=>'delete_genotyping_project_section', title => 'Delete Genotyping Project', subtitle => '<font color="red">Deletion cannot be undone. You cannot delete the project if the project still has genotyping plates or genotyping data</font>', collapsible=>1, collapsed=>1 &>
    <div class="well well-sm">
        <div class="panel panel-default">
            <div class="panel-body">
                <button class="btn btn-default" id="delete_genotyping_project" role="button">Delete Genotyping Project</button><br/><br/>
            </div>
        </div>
    </div>
</&>


<script>

jQuery(document).ready(function(){

    var plate_deletion_table = jQuery('#genotyping_plate_deletion_table').DataTable({
        'autoWidth': false,
        'ajax': '/ajax/genotyping_project/plate_names?genotyping_project_id=<% $trial_id %>',
        'columns': [
            { title: "Plate Names", "data": null, "render": function ( data, type, row ) { return "<a href='/breeders_toolbox/trial/"+row.plate_id+"'>"+row.plate_name+"</a>"; } },
            { title: "Delete", "data": "null", "render": function ( data, type, row ) { return "<a onclick='deletePlate("+row.plate_id+")'>Delete</a>"; } },
        ]
    });
});
</script>
