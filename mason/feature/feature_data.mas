<%args>
    $feature
    $title   => 'Feature'
    $species => undef,
</%args>
<%once>
    use SGN::View::Feature qw/
        feature_link cvterm_link organism_link feature_length
        get_description
        /;
    use CXGN::Page::FormattingHelpers qw/info_table_html/;
    use CXGN::Tools::Text qw/commify_number/;
</%once>
<%perl>
    my ($description)       = get_description($feature);
    my ($length,$locations) = feature_length($feature);
    my $feature_length      = commify_number($length) . " bases";

    if ($locations) {
        $feature_length .= " in $locations location" . ($locations > 1 ? 's' : '');
    };
    my @coords = map { $_->fmin, $_->fmax } $feature->featureloc_features->all;
    my @feature_data = (
        'Name'          => feature_link($feature),
        'Feature Type'  => cvterm_link($feature),
        'Analysis'      => ($feature->is_analysis ? 'Yes' : 'No'),
        'Organism Name' => organism_link($feature->organism),
        'Description'   => $description,
        'Length'        => $feature_length,
        'Coordinates'   => join ",", @coords,
    );
</%perl>
<&| /page/info_section.mas,
    title       => $title,
    subtitle    => $feature->is_obsolete ? 'WARNING: This feature is obsolete' : '',
    collapsible => 1,
&>
    <% info_table_html( @feature_data, __border => 0, __multicol => 3 ) %>
    <& /feature/dbxref.mas, dbxref => $feature->dbxref &>
</&>
