<div id="pagetitle"><h3>An Example Workflow Explaining Workflows</h3></div>

<&| /util/workflow.mas , id=> "my_workflow"&>

  <&| /util/workflow.mas:step, title=>"workflow.mas" &>
    <p>Add a workflow using the <code>/util/workflow.mas</code> mason component</p>
    <p><pre><%text>&lt;&amp;| /util/workflow.mas, id=> "my_workflow" &amp;&gt;...&lt;/&amp;&gt;</%text></pre></p>
    <button type="button" class="btn btn-default" onclick="Workflow.complete(this);">Next</button>
  </&>
  
  <&| /util/workflow.mas:step, title=>"Adding Steps" &>
    <p>Add steps to the workflow using the <code>/util/workflow.mas:step</code> mason method.</p>
    <p>
<pre><%text>&lt;&amp;| /util/workflow.mas, id=&gt; "my_workflow" &amp;&gt;
    &lt;&amp;| /util/workflow.mas:step, title=&gt; "Step A" &amp;&gt;...&lt;/&amp;&gt;
    &lt;&amp;| /util/workflow.mas:step, title=&gt; "Another Step" &amp;&gt;...&lt;/&amp;&gt;
    ...
&lt;/&amp;&gt;</%text></pre>
    </p>
    <button type="button" class="btn btn-default" onclick="Workflow.complete(this);">Next</button>
  </&>
  
  <&| /util/workflow.mas:step, title=>"Completing Steps" &>
  <p>
    Use the <code>Workflow.complete(Element)</code> JavaScript function to 
    complete a step. <code>Element</code> should be any DOM element within the 
    step you would like to complete.
  </p>
  <p>
<pre><%text>&lt;&amp;| /util/workflow.mas, id=&gt; "my_workflow"&amp;&gt;
  &lt;&amp;| /util/workflow.mas:step, title=&gt;"workflow.mas" &amp;&gt;
    ...
    &lt;button type="button" onclick="Workflow.complete(this);"&gt;Next&lt;/button&gt;
  &lt;/&amp;&gt;
  ...
&lt;/&amp;&gt;</%text></pre>
  </p>
  <button type="button" class="btn btn-default" onclick="Workflow.complete(this);">Next</button>
  </&>
  
  <&| /util/workflow.mas:step, title=>"Skipping Steps" &>
  <p>
    Skipping works like completing but marks the step as incomplete. Use
    <code>Workflow.skip(Element)</code> just like you would 
    <code>Workflow.complete(Element)</code>.
  </p>
  <p>
<pre><%text>&lt;&amp;| /util/workflow.mas, id=&gt; "my_workflow"&amp;&gt;
  &lt;&amp;| /util/workflow.mas:step, title=&gt;"workflow.mas" &amp;&gt;
    ...
    &lt;button type="button" onclick="Workflow.skip(this);"&gt;Skip&lt;/button&gt;
  &lt;/&amp;&gt;
  ...
&lt;/&amp;&gt;</%text></pre>
  </p>
  <button type="button" class="btn btn-default" onclick="Workflow.skip(this);">Skip this Step</button>
  </&>
  
  <&| /util/workflow.mas:step, title=>"Pending Steps" &>
  <p>
    Sometimes a step needs time to complete, such as uploads. You can mark a
    step as pending using <code>Workflow.pending(Element)</code>. You can later
    fully complete the step using <code>Workflow.complete(Element)</code>.
  </p>
  <p>
<pre><%text>&lt;&amp;| /util/workflow.mas, id=&gt; "my_workflow"&amp;&gt;
  &lt;&amp;| /util/workflow.mas:step, title=&gt;"workflow.mas" &amp;&gt;
    ...
    &lt;button type="button" onclick="Workflow.pending(this);"&gt;Wait&lt;/button&gt;
    &lt;button type="button" onclick="Workflow.complete(this,false);"&gt;Complete&lt;/button&gt;
  &lt;/&amp;&gt;
  ...
&lt;/&amp;&gt;</%text></pre>
  </p>
  <button id="to_complete" type="button" class="btn btn-primary" onclick="Workflow.pending(this);">Wait and Continue</button>
  </&>
  
  <&| /util/workflow.mas:step, title=>"Endscreens" &>
  <p>
    After the final step is completed, an endscreen will be shown. To set the 
    content of the endscreen, use the <code>/util/workflow.mas:complete</code> 
    mason method. You can also optionally set a special endscreen which is shown
    instead while there are pending steps using 
    <code>/util/workflow.mas:pending</code>.
  </p>
  <p>
<pre><%text>&lt;&amp;| /util/workflow.mas, id=&gt; "my_workflow"&amp;&gt;
  ...
  &lt;&amp;| /util/workflow.mas:complete &amp;&gt; ... &lt;/&amp;&gt;
  &lt;&amp;| /util/workflow.mas:pending &amp;&gt; ... &lt;/&amp;&gt;
&lt;/&amp;&gt;</%text></pre>
  </p>
  <button type="button" class="btn btn-default" onclick="Workflow.complete(this);">Go to endscreen</button>
  </&>
  
  <&| /util/workflow.mas:pending &>
    <h2>There is still a pending step. Complete it to see the final endscreen.</h2>
    <button type="button" class="btn btn-default" onclick="Workflow.complete(document.querySelector('#to_complete'),false);">Complete Pending Step</button>
  </&>
  <&| /util/workflow.mas:complete &>
    <h1>Congratulations, you've made it through the workflow!</h1>
    <h4>Here are some other tips and tricks:</h4>
    <p>To set the currently visible step of the workflow use</p>
    <pre>var wf = document.querySelector("#my_workflow");
Workflow.focus(wf,step_index);</pre>
    <p>
      By default, <code>Workflow.complete(...)</code>, 
      <code>Workflow.skip(...)</code>, and <code>Workflow.pending(...)</code> 
      also change the focus to the next step. Sometimes, you need to set a step 
      to complete without changing the focus. To do this, pass 
      <code>false</code> as the second argument.
    </p>
    <pre>Workflow.complete(Element,false);
Workflow.skip(Element,false);
Workflow.pending(Element,false);</pre>
  </&>
</&>
