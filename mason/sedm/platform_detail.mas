<%doc>
  NAME: platform_detail.mas
  VERSION: 1.0
  DESCRIPTION: This is a mason code to get different sections of the platform.pl web_page.
               It create a platform object using the argument get from the page 
  AUTHOR: Aureliano Bombarely (ab782@cornell.edu)
</%doc>

<%perl>
use strict;
use warnings;

use CXGN::DB::Connection;
use CXGN::SEDM::Schema;
use CXGN::SEDM::Platform;
use CXGN::Page::FormattingHelpers  qw/ info_section_html info_table_html columnar_table_html page_title_html html_break_string /;

my $dbh = CXGN::DB::Connection->new();
my $schema = CXGN::SEDM::Schema->connect( sub { $dbh }, { on_connect_do => ['SET search_path TO sed,public;'] }, );

my ($platform_row, $platform);
if (exists $ARGS{'id'}) {
   ($platform_row) = $schema->resultset('Platforms')->search( { platform_id => $ARGS{'id'} } );
} elsif (exists $ARGS{'name'}) {
   ($platform_row) = $schema->resultset('Platforms')->search( { platform_name => $ARGS{'name'} } );
}
if (defined $platform_row) {
    my $platform_id = $platform_row->get_column('platform_id');
    $platform = CXGN::SEDM::Platform->new($schema, $platform_id);
}
 
## If do not exists the id or name it will return an undef platform. The basic_infor will return the message error


</%perl>


<br>

<& $ARGS{'path'}.'sedm/platform/basic_info.mas', platform=>$platform &>

<& $ARGS{'path'}.'sedm/platform/template_list.mas', platform=>$platform &>
 
<& $ARGS{'path'}.'sedm/platform/experiment_associated.mas', platform=>$platform &>
