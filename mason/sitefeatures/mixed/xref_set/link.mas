<%args>
  $xrefs
</%args>

% if( @$xrefs ) {
    <dl class="xref">
%     for my $f ( sort keys %by_sitefeature ) {
        <dt><% ucfirst $f |h %></dt>
        <dd>
%         my $multi_comp = resolve_xref_component( $m, $by_sitefeature{$f}->[0]->feature, '/sitefeatures/%f/xref_set/link.mas' );
          <& $multi_comp, xrefs => $xrefs &>
        </dd>
%     }
    </dl>
% }

<%once>
   use SGN::View::Mason::CrossReference 'resolve_xref_component';
</%once>
<%init>
  # group the xrefs by sitefeature name
  my %by_sitefeature;
  for my $x ( @$xrefs ) {
      push @{$by_sitefeature{$x->feature->feature_name}}, $x;
  }
</%init>
